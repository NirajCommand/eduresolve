<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Student Dashboard | EduResolve</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

  <link rel="stylesheet" href="style.css">
</head>
<body class="dark-mode">

  <!-- Navbar -->
  <nav class="navbar-custom">
    <div class="nav-left">
      <span class="logo">
        <i class="fa-solid fa-graduation-cap"></i> EduResolve
      </span>
    </div>

    <div class="nav-center">
      <a href="#">Account</a>
      <a href="#">My Courses</a>
      <a href="#">Search</a>
    </div>

    <div class="nav-right">
      <button class="mode-btn" onclick="toggleMode()" title="Switch Light / Dark mode">
  <i class="fa-solid fa-moon"></i>
</button>
      <div class="menu">
  <i class="fa-solid fa-bars"></i>

  <div class="menu-dropdown">
    <a href="#">My Profile</a>
    <a href="#">Account Settings</a>
    <a href="#">Change Password</a>
    <a href="#">Help & Support</a>
    <a href="#" onclick="logout()">Logout</a>
  </div>
</div>
    </div>
  </nav>

  <!-- Welcome Section -->
<div class="welcome-section">
  <div class="welcome-left">
    <h3 id="welcomeText"></h3>
    <p id="welcomeSub"></p>
  </div>

  <div class="welcome-right">
    
    <h5 id="institutionName"></h5>
    <p class="welcome-date" id="todayDate"></p>
  </div>
</div>



  <!-- Main Dashboard -->
  <div class="dashboard-container">

    <!-- LEFT. Updates -->
    <div class="updates-panel">
      <h4>Academic Updates</h4>

      <div class="update-item">
        Class rescheduled by teacher
      </div>

      <div class="update-item">
        New quiz announced for DBMS
      </div>

      <div class="update-item">
        Assignment deadline extended
      </div>
    </div>

    <!-- RIGHT. Actions -->
    <div class="actions-panel">

      <div class="action-card highlight">
        <i class="fa-solid fa-users"></i>
        <h5>Teams</h5>
        <p>Announcements and collaboration</p>
      </div>

      <div class="action-card">
        <i class="fa-solid fa-question"></i>
        <h5>Raise Doubt</h5>
        <p>Ask academic questions</p>
      </div>

      <div class="action-card">
        <i class="fa-solid fa-clipboard-check"></i>
        <h5>Query Status</h5>
        <p>Track doubt resolution</p>
      </div>

      <div class="action-card">
        <i class="fa-solid fa-pen-to-square"></i>
        <h5>My Quizzes</h5>
        <p>Attempt and view scores</p>
      </div>

      <div class="action-card">
        <i class="fa-solid fa-file-lines"></i>
        <h5>Assignments</h5>
        <p>Submit before due date</p>
      </div>

      <div class="action-card">
        <i class="fa-solid fa-book"></i>
        <h5>Study Materials</h5>
        <p>Notes and references</p>
      </div>

      <div class="action-card">
        <i class="fa-solid fa-bell"></i>
        <h5>Notifications</h5>
        <p>Important alerts</p>
      </div>

    </div>
  </div>

  <script>
    function toggleMode() {
      document.body.classList.toggle("dark-mode");
      document.body.classList.toggle("light-mode");
    }
  </script><script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
const { createClient } = supabase;

const SUPABASE_URL = "https://jaetijisqgecxqgcqget.supabase.co";
const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImphZXRpamlzcWdlY3hxZ2NxZ2V0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA2NTIxMDcsImV4cCI6MjA4NjIyODEwN30.9N66bJYHvB2JJIUESX-EQLtQM2Grk9R9xSY04dnexXk";

const client = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

async function checkSession() {
  const { data } = await client.auth.getSession();

  if (!data.session) {
    window.location.href = "login.html";
  }
}

checkSession();

const messages = [
  "Stay consistent. Small progress daily leads to big results.",
  "Focus on understanding, not memorizing.",
  "Discipline today builds your success tomorrow.",
  "Your effort today shapes your academic future."
];

async function loadUser() {

  const { data } = await client.auth.getSession();

  if (!data.session) {
    window.location.href = "login.html";
    return;
  }

  const user = data.session.user;

  const { data: profile } = await client
    .from("users")
    .select("name, institution")
    .eq("id", user.id)
    .single();

  // DEFINE INDEX HERE
  const index = Math.floor(Date.now() / (24 * 60 * 60 * 1000)) % messages.length;

  document.getElementById("welcomeText").innerText =
    "Welcome back, " + profile.name;

  document.getElementById("welcomeSub").innerText =
    messages[index];

  document.getElementById("institutionName").innerText =
    profile.institution;

  const today = new Date();
  document.getElementById("todayDate").innerText =
    today.toLocaleDateString("en-IN", {
      weekday: "long",
      year: "numeric",
      month: "long",
      day: "numeric"
    });
}

loadUser();

async function logout() {
  await client.auth.signOut();
  window.location.href = "login.html";
}

const today = new Date();
document.getElementById("todayDate").innerText =
  today.toLocaleDateString("en-IN", {
    weekday: "long",
    year: "numeric",
    month: "long",
    day: "numeric"
  });
</script>





</body>
</html>
